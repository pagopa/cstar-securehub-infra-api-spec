<policies>
    <inbound>
        <base />
        <choose>
            <when condition="@(context.Request.Body.As<string>(preserveContent: true).Contains(&quot;QBICLE31R41A110G&quot;))">
                <return-response>
                    <set-status code="201" reason="Created" />
                    <set-header name="Content-Type" exists-action="override">
                        <value>application/json</value>
                    </set-header>
                    <set-body>@{
            return @"{
              ""Document"": {
                ""CdtrPmtActvtnReqStsRpt"": {
                  ""GrpHdr"": {
                    ""MsgId"": ""MSG-RESP-20231027-001"",
                    ""CreDtTm"": ""2023-10-27T10:30:00Z"",
                    ""InitgPty"": {
                      ""Id"": {
                        ""OrgId"": {
                          ""Othr"": {
                            ""Id"": ""RTP-SP-ID-12345""
                          }
                        }
                      }
                    }
                  },
                  ""OrgnlGrpInfAndSts"": {
                    ""OrgnlMsgId"": ""MSG-REQ-ORIG-98765"",
                    ""OrgnlMsgNmId"": ""pain.013.001.10"",
                    ""GrpSts"": ""ACTC""
                  },
                  ""OrgnlPmtInfAndSts"": {
                    ""OrgnlPmtInfId"": ""PMT-INF-001"",
                    ""TxInfAndSts"": {
                      ""OrgnlInstrId"": ""INSTR-ID-123456789"",
                      ""OrgnlEndToEndId"": ""E2E-REF-2023-XYZ"",
                      ""TxSts"": ""ACTC""
                    }
                  }
                }
              }
            }";
          }</set-body>
                </return-response>
            </when>
            <when condition="@(context.Request.Body.As<string>(preserveContent: true).Contains(&quot;LSSUDV05L25B272V&quot;))">
                <return-response>
                    <set-status code="400" reason="Bad Request" />
                    <set-header name="Content-Type" exists-action="override">
                        <value>application/json</value>
                    </set-header>
                    <set-body>@{
            return @"{
              ""Document"": {
                ""CdtrPmtActvtnReqStsRpt"": {
                  ""GrpHdr"": {
                    ""MsgId"": ""MSG-REJ-20231027-X01"",
                    ""CreDtTm"": ""2023-10-27T14:30:00Z"",
                    ""InitgPty"": {
                      ""Id"": {
                        ""OrgId"": {
                          ""Othr"": {
                            ""Id"": ""PSP-PAYEE-ID-123""
                          }
                        }
                      }
                    }
                  },
                  ""OrgnlGrpInfAndSts"": {
                    ""OrgnlMsgId"": ""RTP-REQ-ORIG-001"",
                    ""OrgnlMsgNmId"": ""pain.013.001.10"",
                    ""GrpSts"": ""RJCT""
                  },
                  ""OrgnlPmtInfAndSts"": {
                    ""OrgnlPmtInfId"": ""PMT-INF-001"",
                    ""TxInfAndSts"": {
                      ""OrgnlEndToEndId"": ""E2E-123456789"",
                      ""TxSts"": ""RJCT"",
                      ""StsRsnInf"": {
                        ""Orgtr"": {
                          ""Id"": {
                            ""OrgId"": {
                              ""Othr"": {
                                ""Id"": ""PSP-PAYEE-ID-123""
                              }
                            }
                          }
                        },
                        ""Rsn"": {
                          ""Cd"": ""BE16""
                        },
                        ""AddtlInf"": [
                          ""Fiscal Code LSSUDV05L25B272V invalid or unknown""
                        ]
                      }
                    }
                  }
                }
              }
            }";
          }</set-body>
                </return-response>
            </when>
            <otherwise>
                <return-response>
                    <set-status code="201" reason="Created" />
                    <set-header name="Content-Type" exists-action="override">
                        <value>application/json</value>
                    </set-header>
                    <set-body>@("{}")</set-body>
                </return-response>
            </otherwise>
        </choose>
    </inbound>
    <backend>
        <base />
    </backend>
    <outbound>
        <base />
    </outbound>
    <on-error>
        <base />
    </on-error>
</policies>
